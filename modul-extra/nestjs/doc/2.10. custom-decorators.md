### Dekorator Rute Kustom

Nest dibangun di sekitar fitur bahasa yang disebut **decorators**. Decorators adalah konsep yang sudah dikenal luas dalam banyak bahasa pemrograman yang umum digunakan, tetapi di dunia JavaScript, mereka masih relatif baru. Untuk memahami lebih baik bagaimana decorators bekerja, kami merekomendasikan untuk membaca [artikel ini](https://medium.com/google-developers/exploring-es7-decorators-76ecb65fb841). Berikut adalah definisi sederhana:

<blockquote class="external">
  Sebuah decorator ES2016 adalah sebuah ekspresi yang mengembalikan sebuah fungsi dan dapat mengambil target, nama, dan deskripsi properti sebagai argumen.
  Anda menerapkannya dengan menambahkan karakter <code>@</code> di depan decorator dan menempatkannya di bagian paling atas dari apa yang Anda coba dekorasi. Decorator dapat didefinisikan untuk sebuah kelas, sebuah metode, atau sebuah properti.
</blockquote>

#### Param decorators

Nest menyediakan serangkaian **param decorators** yang berguna yang dapat Anda gunakan bersama dengan handler rute HTTP. Berikut adalah daftar decorator yang disediakan dan objek Express (atau Fastify) biasa yang mereka wakili:

<table>
  <tbody>
    <tr>
      <td><code>@Request(), @Req()</code></td>
      <td><code>req</code></td>
    </tr>
    <tr>
      <td><code>@Response(), @Res()</code></td>
      <td><code>res</code></td>
    </tr>
    <tr>
      <td><code>@Next()</code></td>
      <td><code>next</code></td>
    </tr>
    <tr>
      <td><code>@Session()</code></td>
      <td><code>req.session</code></td>
    </tr>
    <tr>
      <td><code>@Param(param?: string)</code></td>
      <td><code>req.params</code> / <code>req.params[param]</code></td>
    </tr>
    <tr>
      <td><code>@Body(param?: string)</code></td>
      <td><code>req.body</code> / <code>req.body[param]</code></td>
    </tr>
    <tr>
      <td><code>@Query(param?: string)</code></td>
      <td><code>req.query</code> / <code>req.query[param]</code></td>
    </tr>
    <tr>
      <td><code>@Headers(param?: string)</code></td>
      <td><code>req.headers</code> / <code>req.headers[param]</code></td>
    </tr>
    <tr>
      <td><code>@Ip()</code></td>
      <td><code>req.ip</code></td>
    </tr>
    <tr>
      <td><code>@HostParam()</code></td>
      <td><code>req.hosts</code></td>
    </tr>
  </tbody>
</table>

Selain itu, Anda dapat membuat **custom decorators** sendiri. Mengapa ini berguna?

Di dunia node.js, adalah praktik umum untuk melampirkan properti ke objek **request**. Kemudian Anda mengekstraknya secara manual di setiap handler rute, menggunakan kode seperti berikut:

```typescript
const user = req.user;
```

Untuk membuat kode Anda lebih mudah dibaca dan transparan, Anda dapat membuat decorator `@User()` dan menggunakannya kembali di seluruh kontroller Anda.

```typescript
@@filename(user.decorator)
import { createParamDecorator, ExecutionContext } from '@nestjs/common';

export const User = createParamDecorator(
  (data: unknown, ctx: ExecutionContext) => {
    const request = ctx.switchToHttp().getRequest();
    return request.user;
  },
);
```

Kemudian, Anda dapat menggunakan decorator ini di mana pun sesuai kebutuhan Anda.

```typescript
@@filename()
@Get()
async findOne(@User() user: UserEntity) {
  console.log(user);
}
@@switch
@Get()
@Bind(User())
async findOne(user) {
  console.log(user);
}
```
